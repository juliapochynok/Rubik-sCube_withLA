def simplify(lst):
    moves = ["D", "d", "U", "u", "F", "f", "L", "l", "R", "r", "B", "b"]
    str_steps = "".join(lst)
    # print(len(str_steps))
    for move in range(len(moves)):
        str_steps = str_steps.replace(moves[move]*4, '')
        if move % 2 == 0:
            str_steps = str_steps.replace((moves[move]+moves[move+1]), '')
            str_steps = str_steps.replace((moves[move + 1] + moves[move]), '')
            str_steps = str_steps.replace(moves[move]*3, moves[move+1])
        else:
            str_steps = str_steps.replace(moves[move]*3, moves[move-1])

    return split_my(str_steps)


def simplify_user(lst):
    str_steps = "".join(lst)
    str_steps = str_steps.replace("lR", 'M')
    str_steps = str_steps.replace("Lr", 'm')
    str_steps = str_steps.replace("Rl", 'M')
    str_steps = str_steps.replace("rL", 'm')

    str_steps = str_steps.replace("dU", 'E')
    str_steps = str_steps.replace("Du", 'e')
    str_steps = str_steps.replace("Ud", 'E')
    str_steps = str_steps.replace("uD", 'e')

    str_steps = str_steps.replace("dU", 'E')
    str_steps = str_steps.replace("Du", 'e')
    str_steps = str_steps.replace("Ud", 'E')
    str_steps = str_steps.replace("uD", 'e')

    str_steps = str_steps.replace("Bf", 'S')
    str_steps = str_steps.replace("bF", 's')
    str_steps = str_steps.replace("fB", 'S')
    str_steps = str_steps.replace("Fb", 's')
    return split_my(str_steps)


def split_my(word):
    return [char for char in word]


if __name__ == "__main__":
    simplify(['L', 'D', 'l', 'd', 'd', 'l', 'd', 'L', 'F', 'd', 'f', 'D', 'b', 'd', 'B', 'f', 'D', 'F', 'D', 'D', 'f', 'd', 'F', 'd', 'r', 'D', 'R', 'L', 'r', 'b', 'b', 'l', 'R', 'B', 'f', 'r', 'r', 'F', 'b', 'd', 'R', 'l', 'F', 'L', 'r', 'd', 'F', 'b', 'L', 'f', 'B', 'd', 'f', 'D', 'F', 'D', 'L', 'd', 'l', 'D', 'B', 'd', 'b', 'd', 'l', 'D', 'L', 'D', 'D', 'd', 'r', 'D', 'R', 'D', 'F', 'd', 'f', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'd', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'f', 'B', 'r', 'b', 'F', 'd', 'd', 'f', 'B', 'r', 'b', 'F', 'b', 'l', 'r', 'd', 'U', 'f', 'f', 'd', 'U', 'd', 'U', 'b', 'd', 'd', 'B', 'D', 'u', 'D', 'u', 'f', 'f', 'D', 'u', 'R', 'd', 'd', 'L', 'B'])
    print("\n")
    simplify(['l', 'd', 'L', 'L', 'd', 'l', 'd', 'd', 'b', 'd', 'B', 'L', 'D', 'l', 'D', 'D', 'f', 'D', 'F', 'F', 'D', 'f', 'D', 'D', 'r', 'D', 'R', 'U', 'U', 'U', 'U', 'd', 'B', 'u', 'D', 'l', 'u', 'u', 'u', 'l', 'R', 'F', 'L', 'r', 'B', 'f', 'r', 'r', 'F', 'b', 'd', 'R', 'l', 'F', 'L', 'r', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'R', 'd', 'r', 'd', 'b', 'D', 'B', 'D', 'B', 'd', 'b', 'd', 'l', 'D', 'L', 'd', 'r', 'D', 'R', 'D', 'F', 'd', 'f', 'D', 'D', 'D', 'D', 'D', 'D', 'd', 'r', 'D', 'R', 'D', 'F', 'd', 'f', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'B', 'd', 'b', 'd', 'l', 'D', 'L', 'd', 'l', 'D', 'L', 'D', 'B', 'd', 'b', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'd', 'l', 'D', 'L', 'D', 'B', 'd', 'b', 'D', 'D', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'r', 'L', 'b', 'l', 'R', 'd', 'd', 'r', 'L', 'b', 'l', 'R', 'r', 'L', 'b', 'l', 'R', 'd', 'd', 'r', 'L', 'b', 'l', 'R', 'f', 'd', 'U', 'l', 'l', 'd', 'U', 'd', 'U', 'r', 'd', 'd', 'R', 'D', 'u', 'D', 'u', 'l', 'l', 'D', 'u', 'F', 'd', 'd'])
    print("\n")
    simplify(['l', 'D', 'L', 'D', 'D', 'l', 'd', 'L', 'R', 'D', 'r', 'D', 'D', 'b', 'D', 'B', 'f', 'D', 'F', 'D', 'D', 'f', 'd', 'F', 'r', 'd', 'R', 'U', 'U', 'U', 'd', 'L', 'u', 'D', 'f', 'u', 'u', 'd', 'f', 'B', 'R', 'F', 'b', 'U', 'U', 'd', 'b', 'u', 'D', 'u', 'D', 'F', 'U', 'd', 'u', 'F', 'b', 'l', 'l', 'f', 'B', 'd', 'F', 'b', 'L', 'f', 'B', 'D', 'D', 'D', 'd', 'f', 'D', 'F', 'D', 'L', 'd', 'l', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'R', 'd', 'r', 'd', 'b', 'D', 'B', 'D', 'D', 'D', 'D', 'B', 'd', 'b', 'd', 'l', 'D', 'L', 'd', 'r', 'D', 'R', 'D', 'F', 'd', 'f', 'D', 'D', 'B', 'd', 'b', 'd', 'l', 'D', 'L', 'D', 'D', 'D', 'D', 'D', 'd', 'r', 'D', 'R', 'D', 'F', 'd', 'f', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'r', 'd', 'R', 'F', 'D', 'f', 'r', 'D', 'R', 'D', 'D', 'r', 'd', 'R', 'F', 'D', 'f', 'r', 'D', 'R', 'D', 'D', 'r', 'd', 'R', 'F', 'D', 'f', 'r', 'D', 'R', 'D', 'D', 'b', 'd', 'B', 'R', 'D', 'r', 'b', 'D', 'B', 'D', 'D', 'D', 'f', 'd', 'F', 'L', 'D', 'l', 'f', 'D', 'F', 'D', 'D', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'd', 'd', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'l', 'f', 'b', 'd', 'U', 'r', 'r', 'd', 'U', 'd', 'U', 'l', 'd', 'd', 'L', 'D', 'u', 'D', 'u', 'r', 'r', 'D', 'u', 'B', 'd', 'd', 'F', 'L'])
    print("\n")
    simplify(['d', 'l', 'D', 'L', 'b', 'd', 'B', 'b', 'd', 'B', 'd', 'f', 'D', 'F', 'r', 'd', 'R', 'U', 'U', 'U', 'U', 'd', 'b', 'u', 'D', 'u', 'D', 'F', 'U', 'd', 'u', 'u', 'u', 'U', 'd', 'F', 'u', 'D', 'r', 'd', 'R', 'l', 'F', 'L', 'r', 'U', 'd', 'B', 'u', 'D', 'l', 'D', 'D', 'D', 'D', 'd', 'r', 'D', 'R', 'D', 'F', 'd', 'f', 'D', 'D', 'D', 'd', 'b', 'D', 'B', 'D', 'R', 'd', 'r', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'B', 'd', 'b', 'd', 'l', 'D', 'L', 'd', 'f', 'D', 'F', 'D', 'L', 'd', 'l', 'D', 'D', 'B', 'd', 'b', 'd', 'l', 'D', 'L', 'D', 'd', 'f', 'D', 'F', 'D', 'L', 'd', 'l', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'r', 'd', 'R', 'F', 'D', 'f', 'r', 'D', 'R', 'D', 'D', 'd', 'D', 'f', 'd', 'F', 'L', 'D', 'l', 'f', 'D', 'F', 'D', 'D', 'd', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'r', 'L', 'b', 'l', 'R', 'd', 'd', 'r', 'L', 'b', 'l', 'R', 'r', 'L', 'b', 'l', 'R', 'd', 'd', 'r', 'L', 'b', 'l', 'R', 'r', 'd', 'U', 'f', 'f', 'd', 'U', 'd', 'U', 'b', 'd', 'd', 'B', 'D', 'u', 'D', 'u', 'f', 'f', 'D', 'u', 'R', 'd', 'd'])
    print("\n")
    simplify(['d', 'l', 'D', 'L', 'b', 'd', 'B', 'd', 'f', 'D', 'F', 'd', 'f', 'B', 'R', 'F', 'b', 'U', 'd', 'b', 'u', 'D', 'u', 'D', 'F', 'U', 'd', 'D', 'D', 'D', 'D', 'D', 'd', 'r', 'D', 'R', 'D', 'F', 'd', 'f', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'R', 'd', 'r', 'd', 'b', 'D', 'B', 'D', 'B', 'd', 'b', 'd', 'l', 'D', 'L', 'd', 'f', 'D', 'F', 'D', 'L', 'd', 'l', 'D', 'D', 'B', 'd', 'b', 'd', 'l', 'D', 'L', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'L', 'd', 'l', 'd', 'f', 'D', 'F', 'd', 'f', 'D', 'F', 'D', 'L', 'd', 'l', 'D', 'D', 'D', 'D', 'D', 'D', 'L', 'd', 'l', 'd', 'f', 'D', 'F', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'r', 'd', 'R', 'F', 'D', 'f', 'r', 'D', 'R', 'D', 'D', 'd', 'b', 'd', 'B', 'R', 'D', 'r', 'b', 'D', 'B', 'D', 'D', 'b', 'd', 'B', 'R', 'D', 'r', 'b', 'D', 'B', 'D', 'D', 'b', 'd', 'B', 'R', 'D', 'r', 'b', 'D', 'B', 'D', 'D', 'D', 'f', 'd', 'F', 'L', 'D', 'l', 'f', 'D', 'F', 'D', 'D', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'f', 'B', 'r', 'b', 'F', 'd', 'd', 'f', 'B', 'r', 'b', 'F', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'b', 'F', 'l', 'f', 'B', 'd', 'd', 'b', 'F', 'l', 'f', 'B', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'f', 'B', 'r', 'b', 'F', 'd', 'd', 'f', 'B', 'r', 'b', 'F', 'r', 'L', 'b', 'l', 'R', 'd', 'd', 'r', 'L', 'b', 'l', 'R', 'r', 'L', 'b', 'l', 'R', 'd', 'd', 'r', 'L', 'b', 'l', 'R', 'f', 'B', 'r', 'b', 'F', 'd', 'd', 'f', 'B', 'r', 'b', 'F', 'f', 'B', 'r', 'b', 'F', 'd', 'd', 'f', 'B', 'r', 'b', 'F', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'b', 'F', 'l', 'f', 'B', 'd', 'd', 'b', 'F', 'l', 'f', 'B', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'f', 'B', 'r', 'b', 'F', 'd', 'd', 'f', 'B', 'r', 'b', 'F', 'r', 'L', 'b', 'l', 'R', 'd', 'd', 'r', 'L', 'b', 'l', 'R', 'b', 'F', 'l', 'f', 'B', 'd', 'd', 'b', 'F', 'l', 'f', 'B', 'b', 'F', 'l', 'f', 'B', 'd', 'd', 'b', 'F', 'l', 'f', 'B', 'b', 'F', 'l', 'f', 'B', 'd', 'd', 'b', 'F', 'l', 'f', 'B', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'b', 'F', 'l', 'f', 'B', 'd', 'd', 'b', 'F', 'l', 'f', 'B', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'f', 'B', 'r', 'b', 'F', 'd', 'd', 'f', 'B', 'r', 'b', 'F', 'r', 'L', 'b', 'l', 'R', 'd', 'd', 'r', 'L', 'b', 'l', 'R', 'r', 'L', 'b', 'l', 'R', 'd', 'd', 'r', 'L', 'b', 'l', 'R', 'r', 'L', 'b', 'l', 'R', 'd', 'd', 'r', 'L', 'b', 'l', 'R', 'b', 'F', 'l', 'f', 'B', 'd', 'd', 'b', 'F', 'l', 'f', 'B', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'b', 'F', 'l', 'f', 'B', 'd', 'd', 'b', 'F', 'l', 'f', 'B', 'l', 'R', 'f', 'r', 'L', 'd', 'd', 'l', 'R', 'f', 'r', 'L', 'f', 'B', 'r', 'b', 'F', 'd', 'd', 'f', 'B', 'r', 'b', 'F', 'r', 'L', 'b', 'l', 'R', 'd', 'd', 'r', 'L', 'b', 'l', 'R', 'r', 'L', 'b', 'l', 'R', 'd', 'd', 'r', 'L', 'b', 'l', 'R'])
    print("\n")
    simplify(['L', 'D', 'l', 'd', 'd', 'l', 'd', 'L', 'R', 'D', 'r', 'D', 'D', 'b', 'D', 'B', 'f', 'D', 'F', 'D', 'D', 'f', 'd', 'F', 'F', 'D', 'f', 'D', 'D', 'r', 'D', 'R', 'b', 'F', 'l', 'B', 'f', 'd', 'L', 'r', 'B', 'l', 'R', 'U', 'U', 'U', 'd', 'B', 'u', 'D', 'l', 'u', 'u', 'd', 'R', 'l', 'F', 'L', 'r', 'd', 'F', 'b', 'L', 'f', 'B', 'D', 'B', 'd', 'b', 'd', 'l', 'D', 'L', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'L', 'd', 'l', 'd', 'f', 'D', 'F', 'D', 'D', 'D', 'F', 'd', 'f', 'd', 'r', 'D', 'R', 'D', 'D', 'D', 'D', 'D', 'D', 'R', 'd', 'r', 'd', 'b', 'D', 'B', 'd', 'b', 'D', 'B', 'D', 'R', 'd', 'r', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'R', 'd', 'r', 'd', 'b', 'D', 'B', 'D', 'D', 'r', 'd', 'R', 'F', 'D', 'f', 'r', 'D', 'R', 'D', 'D', 'r', 'd', 'R', 'F', 'D', 'f', 'r', 'D', 'R', 'D', 'D', 'r', 'd', 'R', 'F', 'D', 'f', 'r', 'D', 'R', 'D', 'D', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'r', 'd', 'R', 'd', 'r', 'd', 'd', 'R', 'd', 'd', 'r', 'L', 'b', 'l', 'R', 'd', 'd', 'r', 'L', 'b', 'l', 'R', 'r', 'L', 'b', 'l', 'R', 'd', 'd', 'r', 'L', 'b', 'l', 'R', 'r', 'd', 'U', 'f', 'f', 'd', 'U', 'd', 'U', 'b', 'd', 'd', 'B', 'D', 'u', 'D', 'u', 'f', 'f', 'D', 'u', 'R', 'd', 'd'])